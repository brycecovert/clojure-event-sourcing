export { default as theme } from './theme';
import { default as SyntaxHighlighter } from 'react-syntax-highlighter';
import { default as github } from 'react-syntax-highlighter/dist/styles/hljs/github';

# Event-sourced systems
with Clojure

---

# Event-sourced systems
## definition
* event - something that occurs in a certain place during a particular interval of time
* source (verb) - to give or trace the source for
* event-sourced system = a system that traces everything that happens, for all time 
* event-sourced system = append-only ledger of events, materialized views

---

# Why event-sourced systems?
* see datomic
* make data available; limit point-to-point communication
* simulatable, replayable, reconcilable

---

# How event-sourced systems?
* Kafka, Kafka Streams, Jackdaw

---

# Kafka

---

# Kafka Streams

---

# Jackdaw

---

# Events

<SyntaxHighlighter language='clojure' style={github} wrapLines={true} >
{`([{:flight "UA1432"} {:event :departed}]
 [{:flight "UA1432"} {:event :arrived}])`}

</SyntaxHighlighter>

---

# A simple example

<SyntaxHighlighter language='clojure' style={github} wrapLines={true} >
{`(-> builder
      (j/kstream (topic-config "flights"  ))
      (j/group-by-key)
      (j/reduce (fn [ v1 v2]
                  (merge v1 v2))
                (topic-config "flights"))
      (j/to-kstream)
      (j/to (topic-config "flight-results")))`}

</SyntaxHighlighter>

---

# The end

---
Notes:
+ Create use case for replay or simulation. Measure outcomes from better algorithm;
